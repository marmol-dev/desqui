{"version":3,"sources":["webpack:///webpack/bootstrap 0d25fa88d62ec849a22f","webpack:///./src/app.js","webpack:///./src/crawler.js","webpack:///external \"request\"","webpack:///external \"cheerio\"","webpack:///./src/html.js","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"lodash.template\"","webpack:///./src/utils.js","webpack:///./src/url.js","webpack:///external \"url-join\"","webpack:///./src/scraper.js","webpack:///external \"website-scraper\"","webpack:///./src/logger.js"],"names":[],"mappings":"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","file":"app.build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0d25fa88d62ec849a22f\n **/","'use strict';\n\nconst Crawler = require('./crawler');\nconst Html = require('./html');\nconst Url = require('./url');\nconst Scraper = require('./scraper');\nconst path = require('path');\nconst Logger = require('./logger');\nconst {mandatory} = require('./utils');\n\n\nclass App {\n  static download({\n    baseUrl = mandatory('baseUrl'), \n    urlLinks = mandatory('urlLinks'), \n    selectors: { \n      links: linksSelector = mandatory('selectors.links'),\n      item: itemSelectors = mandatory('selectors.item') \n    } = mandatory('selectors'), \n    directory = mandatory('directory'), \n    headers, \n    templates,\n    logMode = true\n  }){\n    const html = new Html({itemSelectors, templates});\n    \n    return Crawler.crawl({url: urlLinks, selector: linksSelector, headers})\n      .then($list => \n        $list.map((i) => \n          Url.join(baseUrl, $list.eq(i).attr('href'))\n        ).get()\n      )\n      .then(urls => Scraper.scrape({urls, headers, directory}))\n      .then(resources => \n        Promise.all(\n          resources.map(resource => \n            Html.open(path.join(directory, resource.filename))\n          )\n        )\n      )\n      .then(doms => {\n        html.addContent(doms);\n        return html.saveInDisk(path.join(process.cwd(),directory, 'index.html'));\n      })\n      .then(\n        dir => {\n          Logger.log(logMode, dir);\n          return dir;\n        },\n        err => {\n          Logger.error(logMode, err);\n          return Promise.reject(err);\n        }\n      );\n  }\n}\n\nmodule.exports = App;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app.js\n **/","'use strict';\n\nconst request = require('request');\nconst cheerio = require('cheerio');\n\nclass Crawler {\n  static crawl({url, selector, headers = {}}){\n    return new Promise((resolve, reject) => {\n      request(url, {headers}, (err, response, body) => {\n        if (err) {\n          reject(err);\n        } else {\n          const $ = cheerio.load(body);\n          resolve($(selector));\n        }\n      });\n    });\n  }\n}\n\nmodule.exports = Crawler;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/crawler.js\n **/","module.exports = require(\"request\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"request\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"cheerio\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cheerio\"\n ** module id = 4\n ** module chunks = 0\n **/","'use strict';\n\nconst cheerio = require('cheerio');\nconst fs = require('fs');\nconst path = require('path');\nconst lodashTemplate = require('lodash.template');\nconst {mandatory} = require('./utils');\n\nconst DEFAULT_DOCUMENT_TEMPLATE = `\n  <html>\n    <head>\n      <title>\\${documentTitle}</title>\n    </head>\n    <body>\n      <div id=\"front\">\n        \\${documentFront}\n      </div>\n      <div id=\"items\"></div>\n    </body>\n</html>\n`;\n\nconst DEFAULT_DOCUMENT_FRONT = `\n  <span style=\"font-size:52px\">\n  \\${documentTitle}\n  </span>\n`;\n\nclass Html {\n  static open(path){\n    return new Promise((resolve, reject) => {\n      fs.readFile(path, 'utf8', function (err,data) {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(cheerio.load(data));\n        }\n      });\n    })\n  }\n  \n  constructor({\n    itemSelectors, \n    documentTitle, \n    templates: {\n      documentFront : documentFrontTemplate = DEFAULT_DOCUMENT_FRONT, \n      document : documentTemplate = DEFAULT_DOCUMENT_TEMPLATE, \n      item: itemTemplate = mandatory('templates.item')\n    }\n  }){\n    \n    const documentFront = lodashTemplate(documentFrontTemplate)({documentTitle});\n    const document = lodashTemplate(documentTemplate)({documentTitle, documentFront});\n    \n    this.$ = cheerio.load(document);\n    \n    this.itemCompiledTemplate = lodashTemplate(itemTemplate);\n    this.itemSelectors = itemSelectors;\n    this.$items = this.$('#items');\n  }\n\n  addContent(pages){\n    for(let $ of pages){\n      const context = {};\n      for(const name in this.itemSelectors){\n        context[name] = $(this.itemSelectors[name]).html();\n      } \n      const str = this.itemCompiledTemplate(context);\n      this.$items.append(str);\n    }\n  }\n\n  toString(){\n    return `<html>${this.$('html').html()}</html>`;\n  }\n\n  saveInDisk(dir){\n    return new Promise((resolve, reject)=>{\n      fs.writeFile(dir, this.toString(), (err) => {\n        if (err) reject(err);\n        else resolve(dir);\n      })\n    });\n  }\n}\n\nmodule.exports = Html;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/html.js\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"lodash.template\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash.template\"\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\n\nclass Utils {\n    static mandatory(name){\n        throw new Error(`Param ${name} is mandatory`);\n    }\n}\n\nmodule.exports = Utils;\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","'use strict';\n\nconst urlJoin = require('url-join');\n\nclass Url {\n    static join(...paths){\n        return urlJoin(...paths);\n    }\n}\n\nmodule.exports = Url;\n\n\n/** WEBPACK FOOTER **\n ** ./src/url.js\n **/","module.exports = require(\"url-join\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"url-join\"\n ** module id = 11\n ** module chunks = 0\n **/","'use strict';\n\nconst request = require('request');\nconst cheerio = require('cheerio');\nconst scraper = require('website-scraper');\n\nclass Scraper {\n\n  static scrape({urls, headers, directory}){\n    console.log(urls, directory);\n    let cnt = 0;\n    const urlsObj = urls.map(url => ({url: url, filename: `page_${cnt++}.html`}));\n    return scraper.scrape({\n        urls: urlsObj,\n        directory: directory,\n        request: {\n            headers: headers\n        }\n    });\n  }\n}\n\n\n\nmodule.exports = Scraper;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scraper.js\n **/","module.exports = require(\"website-scraper\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"website-scraper\"\n ** module id = 13\n ** module chunks = 0\n **/","'use strict';\n\nclass Logger {\n    static error(log, ...msg){\n        if (log) console.error(...msg);   \n    }\n    \n    static log(log, ...msg){\n        if (log) console.log(...msg);\n    }\n}\n\nmodule.exports = Logger;\n\n\n/** WEBPACK FOOTER **\n ** ./src/logger.js\n **/"],"sourceRoot":""}